<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:fragment="layout(content)">
<head>
    <meta charset="UTF-8">
    <title th:text="${title} ?: 'Todoアプリ'">Todoアプリ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/css/output.css" rel="stylesheet">
</head>
<body class="bg-gray-50 text-gray-900 flex flex-col min-h-screen">
    <!-- ヘッダー -->
    <header class="bg-white border-b border-gray-200 p-4 shadow-sm sticky top-0 z-40">
        <div class="mx-auto w-full max-w-full flex flex-wrap items-start gap-4">
            <div class="flex items-center justify-between w-full sm:w-auto">
                <span class="font-bold text-lg text-blue-600">Todoアプリ</span>

                <!-- モバイル用 -->
                <button id="menu-btn" class="sm:hidden text-gray-700 focus:outline-none">
                    ☰
                </button>
            </div>

            <div class="flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4 w-full sm:w-auto sm:ml-auto">
                <!-- ナビゲーション -->
                <nav id="menu" class="hidden sm:flex flex-wrap items-center gap-3 text-sm whitespace-nowrap">
                    <a th:href="@{/todos}" class="text-blue-500 hover:underline">Todo一覧</a>
                    <a th:href="@{/categories}" class="text-blue-500 hover:underline">カテゴリ管理</a>
                    <a th:href="@{/logout}" class="text-blue-500 hover:underline">ログアウト</a>
                </nav>
            </div>
        </div>

        <!-- モバイルメニュー -->
        <div id="mobile-menu" class="hidden flex-col mt-2 sm:hidden">
            <a th:href="@{/todos}" class="block py-2 border-t text-blue-500 hover:bg-blue-50">Todo一覧</a>
            <a th:href="@{/categories}" class="block py-2 border-t text-blue-500 hover:bg-blue-50">カテゴリ管理</a>
            <a th:href="@{/logout}" class="block py-2 border-t text-blue-500 hover:bg-blue-50">ログアウト</a>
        </div>
    </header>

    <!-- ページ内容 -->
    <main class="flex-grow p-4 sm:p-6 w-full max-w-full">
        <div th:replace="${content}"></div>
    </main>

    <!-- フッター -->
    <footer class="border-t border-gray-200 text-center text-sm text-gray-500 mt-8 p-4">
        <p>&copy; 2025 TodoApp</p>
    </footer>

    <script src="/js/weather.js"></script>
    <script>
        // モバイルメニューの切り替え
        const menuBtn = document.getElementById('menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        if (menuBtn && mobileMenu) {
            menuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
        }
    </script>
</body>
</html>
